#!/usr/bin/env node
import N from'chalk';import {Command}from'commander';import v,{existsSync,mkdirSync,writeFileSync,readFileSync,renameSync,readdirSync,statSync}from'fs';import P,{join as join$1,basename as basename$1}from'path';import*as K from'@clack/prompts';import {spinner,select,text,cancel,confirm,isCancel}from'@clack/prompts';import yr,{resolve,join,basename}from'pathe';import {findUp}from'find-up';import {fileURLToPath}from'url';import Le from'@winches/prompts';import zt from'gradient-string';import {execSync,exec}from'child_process';import Bn from'async-retry';import {validate,compareVersions}from'compare-versions';import Ir,{oraPromise}from'ora';import Lr from'fast-glob';import {Readable}from'stream';import {pipeline}from'stream/promises';import Zr from'tar';import xi from'os';var V=process.cwd(),A=e=>resolve(V,e),Re=resolve(fileURLToPath(import.meta.url),"../components.json");var Xt=["#F54180","#338EF7"],ht=zt(...Xt),fr=ht("HeroUI CLI:"),c=class{static log(...t){console.log(...t);}static info(...t){console.info(...t.map(n=>N.blue(n)));}static success(...t){console.info(...t.map(n=>N.green(n)));}static warn(...t){console.warn(...t.map(n=>N.yellow(n)));}static error(...t){console.error(...t.map(n=>N.red(n)));}static grey(...t){console.log(...t.map(n=>N.gray(n)));}static gradient(t,n){this.log(zt(...n?.colors??Xt)(String(t)));}static prefix(t,...n){return this[t](fr,...n)}static newLine(t=1){for(let n=0;n<t;n++)this.log();}};var Oe={onCancel:()=>{c.log(`${N.red("\u2716")} Operation cancelled`),process.exit(0);}};async function Qt(e,t){return (await Le({message:e,name:"value",type:"text",...{initial:t}},Oe)).value}async function we(e,t){return (await Le({hint:"- Space to select. Return to submit",message:e,min:1,name:"value",type:"autocompleteMultiselect",...t?{choices:t}:{}},Oe)).value}async function W(e,t){return (await Le({message:e,name:"value",type:"select",...t?{choices:t}:{}},Oe)).value}async function Zt(e,t){return (await Le({hint:"- Space to select. Return to submit",message:e,min:1,name:"value",type:"multiselect",...t?{choices:t}:{}},Oe)).value}async function en(e){return (await Le({message:e,name:"value",type:"confirm"},Oe)).value===true}var ze=["npm","bun","pnpm","yarn"];var tn={"bun.lock":"bun","bun.lockb":"bun","npm-shrinkwrap.json":"npm","package-lock.json":"npm","pnpm-lock.yaml":"pnpm","yarn.lock":"yarn"};async function B(e=V){let t,n=await findUp(Object.keys(tn),{cwd:e});return n?t=tn[yr.basename(n)]:t=await W("No agent found, please choose one",ze.map(o=>({title:o,value:o}))),t}var yt=new Map;async function G(e,t){return new Promise((n,o)=>{try{let{cache:r=!0,logCmd:i=!0,...s}=t||{};if(yt.has(e)&&r){let p=yt.get(e);if(p){n(p);return}}i&&(c.newLine(),c.log(`${e}`));let a=execSync(e,{stdio:"inherit",...s});if(a){let p=a.toString();yt.set(e,p),n(p);return}n("");}catch(r){o(r);}})}function U(e="",t=""){if(!validate(e))return  -1;try{return compareVersions(e,t)}catch{return 0}}async function Ar(){if(!existsSync(Re)){await on();return}let e=JSON.parse(readFileSync(Re,"utf-8")),t=e.version,n=e.betaVersion,o=await pe("latestVersion"),r=await pe("betaVersion");(U(t,o)===-1||n&&U(n,r)===-1)&&await on(o,r);}async function xt(){let e={};await Ar();try{e=JSON.parse(readFileSync(Re,"utf-8"));}catch(t){}return e}async function Ct(e,t){t=t??`Executing ${e}`;let n=Ir({discardStdin:false,spinner:{frames:[`\u280B ${N.gray(`${t}.`)}`,`\u2819 ${N.gray(`${t}..`)}`,`\u2839 ${N.gray(`${t}...`)}`,`\u2838 ${N.gray(`${t}.`)}`,`\u283C ${N.gray(`${t}..`)}`,`\u2834 ${N.gray(`${t}...`)}`,`\u2826 ${N.gray(`${t}.`)}`,`\u2827 ${N.gray(`${t}..`)}`,`\u2807 ${N.gray(`${t}...`)}`,`\u280F ${N.gray(`${t}.`)}`],interval:150}});n.start();let o=await new Promise(r=>{exec(e,(i,s)=>{i&&(c.error(`Exec cmd ${e} error`),process.exit(1)),r(s.trim());});});return n.stop(),o}async function Q(e){return y.heroUIComponentsPackageMap[e]?y.heroUIComponentsPackageMap[e].version:(await an(e)).version}var nn=e=>`https://unpkg.com/@heroui/react@${e}/dist/components.json`;async function on(e,t){[e,t]=await Promise.all([e||pe("latestVersion"),t||pe("betaVersion")]);let n=nn(e),[o,r]=await Promise.all([rn(n),H("beta")&&t&&t[0]!=="3"?rn(nn(t),false):Promise.resolve([])]),i=r.filter(a=>!o.find(p=>p.name===a.name));o.push(...i);let s={betaComponents:r,betaVersion:t,components:o,version:e};return writeFileSync(Re,JSON.stringify(s,null,2),"utf-8"),s}async function rn(e,t=true){let n;return await oraPromise(Bn(async o=>{try{let r=await fetch(e,{body:null,headers:{"Content-Type":"application/json",accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7"},method:"GET",mode:"cors"});n=JSON.parse(await r.text());}catch(r){o(r);}},{retries:3}),{failText(o){t&&c.prefix("error",`Update components data error: ${o}`),process.exit(1);},...t?{successText:N.greenBright(`Components data updated successfully!
`)}:{},text:"Fetching components data..."}),n}process.env.CI==="true";var ln=resolve(fileURLToPath(import.meta.url),"../.."),wt=e=>resolve(ln,e),mn=resolve(fileURLToPath(import.meta.url),".."),Dr=existsSync(join(mn,"components.json")),Ne=Dr?resolve(`${mn}/.heroui-cli-cache`):resolve(join(ln,".."),"node_modules/.heroui-cli-cache"),ve=resolve(`${Ne}/data.json`);var Tr=30*6e4,kt=false;function Qe(e=kt){kt=!!e,existsSync(Ne)||mkdirSync(Ne,{recursive:true}),existsSync(ve)||writeFileSync(ve,JSON.stringify({}),"utf8");}function Ze(){(!existsSync(Ne)||!existsSync(ve))&&Qe();let e=readFileSync(ve,"utf8");return JSON.parse(e)}function dn(e,t,n){Qe();let o=n??Ze(),r=new Date,i=+r+Tr;o[e]={...t,date:r,expiredDate:i,expiredFormatDate:new Date(i).toString(),formatDate:r.toString()},writeFileSync(ve,JSON.stringify(o,void 0,2),"utf-8");}function Rr(){return Date.now()}function fn(e,t){if(kt)return  true;let o=(t??Ze())[e];return o?.expiredDate?Rr()>o.expiredDate:true}async function an(e){let t=Ze();if(fn(e,t)){let r={version:await Ct(`npm view ${e} version`,`Fetching ${e} latest version`)};return dn(e,r,t),r}return {version:t[e].version}}async function le(e,t){let n=Ze();if(fn(e,n)){let i={execResult:await Ct(e,t)};return dn(e,i,n),i.execResult}return n[e].execResult}async function et(e){return await le(`npm view ${e} dist-tags --json`,`Fetching ${e} tags`)}function gn(e){return `@heroui/${e.replace("@heroui/","")}`}async function He(e){if(y.betaHeroUIComponentsPackageMap[e])return y.betaHeroUIComponentsPackageMap[e].version;let t=await et(e);try{return JSON.parse(t).beta}catch(n){c.error(`Get beta version error: ${n}`),process.exit(1);}}async function hn(e){return await Promise.all(e.map(gn).map(async n=>{let o=await He(n);return `${gn(n)}@${o}`}))}var yn="heroui-cli",tt="framer-motion",be="tailwindcss",S="@heroui/react",Y="@heroui/theme",re="@heroui/system";var xn="@heroui",vt="https://heroui.com/docs/guide/installation#global-installation",nt="https://heroui.com/docs/guide/installation#tailwind-css-setup";var Cn="https://heroui.com/docs/guide/installation#setup-pnpm-optional",ot="https://heroui.com/docs/guide/installation#provider-setup",E={checkPluginsRegex:/heroui(([\W\w]+)?)/,content:"./node_modules/@heroui/theme/dist/**/*.{js,ts,jsx,tsx}",darkMode:'darkMode: "class"',importContent:(e=false)=>e?"import {heroui} from '@heroui/theme';":"const {heroui} = require('@heroui/theme');",plugins:"heroui()"},wn={content:(e,t)=>{e.forEach(r=>{let i=kn(r,t);e.push(...i);});let n=[...new Set(e.map(r=>r.style||r.name))];return n.length===1?`./node_modules/@heroui/theme/dist/components/${n[0]}.js`:`./node_modules/@heroui/theme/dist/components/(${n.reduce((r,i)=>r+=`${i}|`,"").replace(/\|$/,"")}).js`},plugins:"heroui()"},bt={import:"HeroUIProvider"},_={content:"public-hoist-pattern[]=*@heroui/*"};function kn(e,t){let n=e.name,o=A(`node_modules/@heroui/${n}`),r=[e];if(!existsSync(o)&&t){let s=A("node_modules/.pnpm"),a=Lr.sync(`**/@heroui/${n}`,{absolute:true,cwd:s,onlyDirectories:true})[0];if(a)o=a;else return r}let{currentComponents:i}=$(join(o,"package.json"));if(i.length)for(let s of i){let a=kn(s,t);r.push(...a);}return r}var y={debug:false,beta:false,cliLatestVersion:"",latestVersion:"",betaVersion:"",betaHeroUIComponents:[],betaHeroUIIComponentsKeys:[],betaHeroUIComponentsKeysSet:new Set,betaHeroUIComponentsMap:{},betaHeroUIComponentsPackageMap:{},betaHeroUIcomponentsPackages:[],heroUIComponents:[],heroUIComponentsKeys:[],heroUIComponentsKeysSet:new Set,heroUIComponentsMap:{},heroUIComponentsPackageMap:{},heroUIcomponentsPackages:[]};async function pe(e){let t=y[e];return t||(e==="latestVersion"?(t=await Q(S),y[e]=t):e==="cliLatestVersion"?(t=await Q(yn),y[e]=t):e==="betaVersion"&&(t=await He(S),y[e]=t)),t}function H(e){return y[e]}function Nr(e){let t=e.map(s=>s.name),n=e.map(s=>s.package),o=new Set(t),r=e.reduce((s,a)=>(s[a.name]=a,s),{}),i=e.reduce((s,a)=>(s[a.package]=a,s),{});return {heroUIComponentsKeys:t,heroUIComponentsKeysSet:o,heroUIComponentsMap:r,heroUIComponentsPackageMap:i,heroUIcomponentsPackages:n}}function St({beta:e,heroUIComponents:t}){let{heroUIComponentsKeys:n,heroUIComponentsKeysSet:o,heroUIComponentsMap:r,heroUIComponentsPackageMap:i,heroUIcomponentsPackages:s}=Nr(t);e?(y.betaHeroUIComponents=t,y.betaHeroUIIComponentsKeys=n,y.betaHeroUIComponentsKeysSet=o,y.betaHeroUIComponentsMap=r,y.betaHeroUIComponentsPackageMap=i,y.betaHeroUIcomponentsPackages=s):(y.heroUIComponents=t,y.heroUIComponentsKeys=n,y.heroUIComponentsKeysSet=o,y.heroUIComponentsMap=r,y.heroUIComponentsPackageMap=i,y.heroUIcomponentsPackages=s);}var rt=["package","version","status","docs"],vn=["package","version","status"];function bn(){return y.beta?{components:y.betaHeroUIComponents,componentsKeys:y.betaHeroUIIComponentsKeys,componentsKeysSet:y.betaHeroUIComponentsKeysSet,componentsMap:y.betaHeroUIComponentsMap,componentsPackageMap:y.betaHeroUIComponentsPackageMap,componentsPackages:y.betaHeroUIcomponentsPackages}:{components:y.heroUIComponents,componentsKeys:y.heroUIComponentsKeys,componentsKeysSet:y.heroUIComponentsKeysSet,componentsMap:y.heroUIComponentsMap,componentsPackageMap:y.heroUIComponentsPackageMap,componentsPackages:y.heroUIcomponentsPackages}}var It={bold:{bottomLeft:"\u2517",bottomRight:"\u251B",horizontal:"\u2501",topLeft:"\u250F",topRight:"\u2513",vertical:"\u2503"},classic:{bottomLeft:"+",bottomRight:"+",horizontal:"-",topLeft:"+",topRight:"+",vertical:"|"},double:{bottomLeft:"\u255A",bottomRight:"\u255D",horizontal:"\u2550",topLeft:"\u2554",topRight:"\u2557",vertical:"\u2551"},doubleSingle:{bottomLeft:"\u2558",bottomRight:"\u255B",horizontal:"\u2550",topLeft:"\u2552",topRight:"\u2555",vertical:"\u2502"},round:{bottomLeft:"\u2570",bottomRight:"\u256F",horizontal:"\u2500",topLeft:"\u256D",topRight:"\u256E",vertical:"\u2502"},single:{bottomLeft:"\u2514",bottomRight:"\u2518",horizontal:"\u2500",topLeft:"\u250C",topRight:"\u2510",vertical:"\u2502"},singleDouble:{bottomLeft:"\u2559",bottomRight:"\u255C",horizontal:"\u2500",topLeft:"\u2553",topRight:"\u2556",vertical:"\u2551"}};var Sn=["node_modules/**","dist/**","build/**","coverage/**","public/**","out/**"],_e=/([\^~])/;function An(e,t){return c.gradient(e),t}function $n(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join("")}var ue=(e,t)=>Lr.sync(e,{absolute:true,cwd:V,deep:5,ignore:[...Sn],onlyFiles:true,...t});function at(e){return e==="false"?false:!!e}function Z(e,t){return e=J(e),t=J(t),it(e,t)?it(e,t):st(e,t)?st(e,t):Pn(e,t)?Pn(e,t):t}function it(e,t){let n=e.split("."),o=t.split(".");return n[0]!==o[0]?N.redBright(o.join(".")):""}function st(e,t){let n=e.split("."),o=t.split(".");return n[1]!==o[1]?`${N.white(o[0])}${N.white(".")}${N.cyanBright(o.slice(1).join("."))}`:""}function Pn(e,t){let n=e.split("."),o=t.split(".");return n[2]!==o[2]?`${N.white(o.slice(0,2).join("."))}${N.white(".")}${N.greenBright(o.slice(2).join("."))}`:""}function ee(e,t){let n=e[t].replace(_e,""),o=e[t].match(_e)?.[1]||"";return {currentVersion:n,versionMode:o}}function Se(e){return {bun:{install:"add",remove:"remove",run:"run"},npm:{install:"install",remove:"uninstall",run:"run"},pnpm:{install:"add",remove:"remove",run:"run"},yarn:{install:"add",remove:"remove",run:"run"}}[e]}function J(e,t=false){return e.split("||").map(r=>r.trim()).map(r=>r.replace(/^[<=>^~]+\s*/,"").trim()).sort((r,i)=>t?compareVersions(i,r):compareVersions(r,i))[0]??e}function ie(e,t){let n=e.replace(j,""),o=t-n.length>0?" ".repeat(t-n.length):"";return `${e}${o}`}function O(e){return e.replace(j,"")}var j=/\u001b\[[\d;]+m/g,R=It.round,Pt="   ",je=`${R.vertical}${Pt}`,Dn=`${Pt}${R.vertical}${Pt}`,Un=/([\W\w]+)\snew:/,En=/new:\s([\W\w]+)/;function de({commandName:e,components:t,message:n=`Current installed components:
`,warnError:o=true}){if(!t.length){o&&c.prefix("warn","No components found");return}let r={description:0,docs:0,name:0,originVersion:0,package:0,peerDependencies:0,status:0,style:0,version:0};for(let m of t)for(let u in m){let d=String(m[u]);if(u==="version"){let g=d.match(En)?.[1],f=d.match(Un)?.[1],C=O(Tn(f,g));r[u]=Math.max(r[u],Math.max(C.length,7)),r.originVersion=Math.max(r.originVersion,f.length);continue}r[u]=Math.max(r[u],d.length);}let i=t.reduce((m,u)=>{let d=je;for(let g of rt){let f=ie(u[g],r[g]);if(e!=="list"&&g==="version"){let C=f.match(Un)?.[1]?.trim(),w=f.match(En)?.[1]?.trim();C===w?(f=f.replace(/\snew:\s[\W\w]+(\s+)?/,""),f=ie(`${ie(f,r.originVersion)} \u{1F680}latest`,r[g]),f=f.replace("latest",N.magentaBright.underline("latest"))):w&&(f=ie(Tn(ie(C,r.originVersion),w),r[g]));}u.status==="stable"&&vn.includes(g)?f=N.greenBright(f):u.status==="new"?f=N.magentaBright(f):u.status==="updated"&&(f=N.blueBright(f)),d+=f+Dn;}return m.push(d),m},[]),s=R.topLeft+je.replace(/.*/g,R.horizontal).slice(1),a=je,p=R.vertical+je.replace(/.*/g,R.horizontal).slice(1);for(let m of rt)s+=`${R.horizontal.padEnd(r[m]+7,R.horizontal)}`,a+=N.redBright($n(m).padEnd(r[m]))+Dn,p+=`${R.horizontal.padEnd(r[m]+7,R.horizontal)}`;s=s.slice(0,-2)+R.topRight,p=p.slice(0,-2)+R.vertical;let l=R.bottomLeft+je.replace(/.*/g,R.horizontal).slice(1);for(let m of rt)l+=`${R.horizontal.padEnd(r[m]+7,R.horizontal)}`;l=l.slice(0,-2)+R.bottomRight,i=[s,a,p,...i,l],c.info(n),c.log(i.join(`
`));}function Rn(){c.newLine(),c.log(N.redBright("Environment Info:")),c.log(N.blueBright("  System:")),c.log(N.blueBright("    OS:"),process.platform),c.log(N.blueBright("    CPU:"),process.arch),c.log(N.greenBright("  Binaries:")),c.log(N.greenBright("    Node:"),process.version),c.newLine();}function Fe({align:e="center",borderStyle:t="round",center:n=false,color:o,log:r=true,padding:i=0,text:s,title:a}){let p=It[t],l=o?Object.fromEntries(Object.entries(p).map(([D,M])=>[D,N[o](M)])):p,m=s.split(`
`),u=m.map(D=>D.replace(j,"")),d=i>0,g=i,f=n||d,C=u.reduce((D,M)=>M.length>D?M.length:D,0);C=d?C+g*4:C;let w=a?a.replace(j,""):"",h=a?w.length:0,k=C-h,b=2;for(;h+b+g>=C;)C+=Math.floor(h/2);k=C-h;let x=(()=>{if(a)if(e==="center"){let D=Math.floor(k/2)-1,M=Math.ceil(k/2)-1,gt=D>0?l.horizontal.repeat(D):"",oe=M>0?l.horizontal.repeat(M):"";return `${gt} ${a} ${oe}`}else return e==="left"?` ${a} ${l.horizontal.repeat(k-2)}`:`${l.horizontal.repeat(k-2)} ${a} `;return l.horizontal.repeat(C)})(),I=l.topLeft+x+l.topRight,L=l.bottomLeft+l.horizontal.repeat(C)+l.bottomRight,T=m.reduce((D,M)=>{let gt=M.replace(j,""),oe=C-gt.length,pr=" ".repeat(oe),Gt=Math.floor(oe/2),Yt=Math.ceil(oe/2),lr=Gt>0?" ".repeat(Gt):"",mr=Yt>0?" ".repeat(Yt):"";if(n)D.push(`${l.vertical}${oe?`${lr}${M}${mr}`:M}${l.vertical}`);else if(i){let ur=oe-g*2;D.push(`${l.vertical}${" ".repeat(g*2)}${M}${" ".repeat(ur)}${l.vertical}`);}else D.push(`${l.vertical}${oe>0?`${M}${pr}`:M}${l.vertical}`);return D},[]);if(f)for(let D=0;D<g;D++)T.unshift(`${l.vertical}${" ".repeat(C)}${l.vertical}`),T.push(`${l.vertical}${" ".repeat(C)}${l.vertical}`);return T=[I,...T,L],r&&c.log(T.join(`
`)),T.join(`
`)}function Tn(e,t){return `${N.white(`${e} ->`)} ${N.yellowBright(`${t} (new)`)}`}function $(e,t=true){let n;try{n=JSON.parse(readFileSync(e,"utf-8"));}catch(l){c.prefix("error",`Error reading package.json file: ${e} 
Error: ${l}`);}let o=n.devDependencies||{},r=n.dependencies||{},i={...o,...r},s=new Set(Object.keys(i)),a=y.heroUIComponents.map(l=>{let m=l.version,u=l.versionMode;if(s.has(l.package)){let d=ee(i,l.package);m=t?`${d.currentVersion} new: ${m}`:d.currentVersion,u=d.versionMode;}return {...l,version:m,versionMode:u}}).filter(l=>s.has(l.package)),p=s.has(S);return {allDependencies:i,allDependenciesKeys:s,currentComponents:a,dependencies:r,devDependencies:o,isAllComponents:p,packageJson:n}}function Mn(e){return e.map(t=>{let o=y.heroUIComponentsMap[t]?.package;return o||t})}async function Ln(e,t,n=true){let o=[];for(let r of e){let{currentVersion:i}=ee(t,r),{versionMode:s}=ee(t,r),a=(await le(`npm show ${r} homepage`)||"").replace(/\n/,""),p=(await le(`npm show ${r} description`)||"").replace(/\n/,""),l=y.heroUIComponentsPackageMap[r]?.version||await Q(r);i=n?`${i} new: ${l}`:i;let m={description:p||"",docs:a||"",name:r,package:r,peerDependencies:{},status:"stable",style:"",version:i,versionMode:s};o.push(m);}return o}var At=e=>{isCancel(e)&&(cancel(`${N.red("\u2716")} Operation cancelled`),process.exit(0));},Hn=async e=>{let t=await text(e);return At(t),t},Ie=async e=>{let t=await select(e);return At(t),t};var On=spinner(),_n=async e=>{let{failText:t,successText:n,task:o,text:r}=e,i=null;try{On.start(r),i=await(o instanceof Promise?o:Promise.resolve(o)),On.stop(n);}catch{cancel(t??i??"Task failed"),process.exit(0);}return i},jn=async e=>{let t=await confirm(e);return At(t),t},Fn=async()=>{let t=readdirSync(process.cwd()).filter(o=>statSync(join(process.cwd(),o)).isDirectory()).map(o=>({label:o,value:o})).filter(o=>!["node_modules","dist","build","output",/^\./].some(r=>typeof r=="string"?o.value.includes(r):r.test(o.value)));return t.length?await Ie({message:"Please select the directory to add the codebase",options:t}):"src"};async function Vn(e){let t=e.match(/^https?:\/\//)?.[0]??"",[n,o,r,i,s]=e.replace(t,"").split("/");return {baseStorageUrl:`${t}${n}/sandbox/files/${r}?sandboxId=${i}`,chatTitle:s,sandboxId:i,userId:o??""}}async function ei(e){let t=await fetch(e);if(!t.body)throw new Error(`Failed to download: ${e}`);return Readable.fromWeb(t.body)}async function qn(e,t){await Bn(async n=>{try{await pipeline(await ei(t),Zr.x({cwd:e}));}catch(o){n(new Error(`Failed to download ${t} Error: ${o}`));}},{retries:3});}async function Kn(e,t){let{fetchInfo:n,throwError:o=true,...r}=t??{},i=`Fetching ${n??basename$1(e)}`,s=Ir({discardStdin:false,spinner:{frames:[`\u280B ${N.gray(`${i}.`)}`,`\u2819 ${N.gray(`${i}..`)}`,`\u2839 ${N.gray(`${i}...`)}`,`\u2838 ${N.gray(`${i}.`)}`,`\u283C ${N.gray(`${i}..`)}`,`\u2834 ${N.gray(`${i}...`)}`,`\u2826 ${N.gray(`${i}.`)}`,`\u2827 ${N.gray(`${i}..`)}`,`\u2807 ${N.gray(`${i}...`)}`,`\u280F ${N.gray(`${i}.`)}`],interval:150}});s.start();try{return await Bn(async()=>{let a=await fetch(e,{...r,headers:{Accept:"application/json",...r?.headers}});if(!a.ok&&o)throw new Error(`Request failed with status ${a.status}`);return a},{retries:2})}catch(a){throw a instanceof Error&&a.message.includes("fetch failed")?new Error("Connection failed. Please check your network connection."):a}finally{s.stop();}}async function Wn(e,t){return (await(await Kn(e,{fetchInfo:"codebase files",headers:{userId:t}})).json()).entries??{}}function ct(e){let t=/import {?\s*([\W\w]+?)\s*}? from ["'](.+)["']/g,n=e.match(t)??[],o=[];for(let i of n)o.push(r(i));return o.length?o:[];function r(i){let s=/import {?\s*([\W\w]+?)\s*}? from ["'](.+)["']/,a=i.match(s)??[];return [a[1]??"",a[2]??""]}}function Gn(e){return e.replace(/^["'`](.*)["'`]$/,"$1")}function X(e,t){let n=new RegExp(`\\s*${e}:\\s\\[([\\w\\W]*?)\\]\\s*`);return n.test(t)?t.match(n)?.[1]?.split(/,\s/g).map(o=>Gn(o.trim())).filter(Boolean)??[]:[]}function Pe(e,t,n,o){let r=new RegExp(`\\s*${e}:\\s\\[([\\w\\W]*?)\\]\\s*`),i=o??n.map(m=>JSON.stringify(m)).join(", ");if(r.test(t)){let m=e==="content"?`
  ${e}: [${i}]`:`
  ${e}: [${n}]`;return t.replace(r,m)}let s=t.split(`
`),a=s.findIndex(m=>m.includes("content:")),p=s.findIndex(m=>m.includes("module.exports =")),l=a!==-1?a-1:p!==-1?p:0;return e==="content"?s.splice(l+1,0,`  ${e}: [${i}],`):s.splice(l+1,0,`  ${e}: [${n.map(m=>Gn(m))}],`),s.join(`
`)}function ti(e){return ct(e).map(o=>o.find(r=>r.includes("./"))).filter(Boolean)}async function Jn(e){let{content:t,entries:n,filePath:o}=e,r=[];async function i(s){let a=ti(s);a.length!==0&&await Promise.all(a.map(async p=>{let l=n?.find(f=>basename$1(f.name).includes(basename$1(p))),m=l?.name.split(".").pop(),u=`${p.split("/").pop()}`,d=`src/${p.replace(/.*?\//,"")}${m?`.${m}`:""}`;if(r.some(f=>f.fileName===u))return;let g=l?.content??"";r.push({fileContent:g,fileName:u,filePath:d}),await i(g);}));}try{await i(t),r.push({fileContent:t,fileName:o.split("/").pop(),filePath:o});}catch(s){c.error(s),process.exit(1);}return r}function Dt(e,t,n){if(t.includes("/")){let o=t.split("/").slice(0,-1).join("/");v.mkdirSync(`${e}/${o}`,{recursive:true}),v.writeFileSync(`${e}/${t}`,n,"utf8");}else v.writeFileSync(`${e}/${t}`,n,"utf8");}var ii=/^https?:\/\//,Ut="App.tsx";function pt(e){return e.some(t=>ii.test(t))}async function Xn(e,t){K.intro(N.cyan("Starting to add HeroUI Chat codebase"));let n=resolve(process.cwd(),t.directory??await Fn()),{baseStorageUrl:o,chatTitle:r,userId:i}=await Vn(e[0]),s=r?`${r}.tsx`:void 0;v.existsSync(n)||(c.error(`Directory ${n} does not exist`),process.exit(1));let p=await Wn(o,i),l=p.find(u=>u.name.includes(Ut)),m=p.find(u=>u.name.includes("package.json"))?.content;if(l){let u=await Jn({content:l.content,entries:p,filePath:"src/App.tsx"});for(let d of u){if(d.fileName.includes(Ut)){Dt(n,`${s||Ut}`,d.fileContent);continue}Dt(n,`${d.filePath.replace("src/","")}`,d.fileContent);}}if(m){let u=JSON.parse(m),{allDependenciesKeys:d}=$(join$1(process.cwd(),"package.json")),g=Object.keys(u.dependencies).filter(f=>!d.has(f));if(g.length>0){K.log.warn(`The project is missing the following dependencies to run the codebase: ${g.join(", ")}`);let f=await jn({message:"Do you want to add the missing dependencies?"}),C=await B(),h=`${C} ${C==="npm"?"install":"add"} ${g.map(k=>`${k}@${u.dependencies[k]}`).join(" ")}`;if(f)try{await G(h);}catch{K.log.error(`Failed to install dependencies. Please add ${g.join(" ")} manually.`);}else K.note(`Run \`${h}\` to start!`,"Next steps");}}K.outro(N.green("\u2705 HeroUI Chat codebase added successfully!"));}function si(e,t){let n=0,o=e.length,r=t.length,i=0,s=0;for(;i<o&&s<r;)e[i]===t[s]&&(n++,s++),i++;return n}function Ve(e,t){let n=0,o="";for(let r of e){let i=si(r,t);i>n&&(n=i,o=r);}return o!==""?o:null}function Et(e,t){let n=Ve(e,t);n?c.error(`Unknown option '${t}', Did you mean '${n}'?`):c.error(`Unknown option '${t}'`),process.exit(1);}var lt={version:"1.4.0"};function Tt(e,t=true){let o=bn().components.filter(i=>i.peerDependencies[e]),r="";return t?r=o.map(a=>a.peerDependencies[e]).reduce((a,p)=>U(a,p)>0?p:a)||"":r=o[0]?.version||"",J(r)}async function fe(e){return y.beta?await He(e):await Q(e)}async function Qn(e){let n=Object.keys(e).filter(r=>!y.heroUIcomponentsPackages.includes(r)&&r.startsWith(xn));return n.length?await Promise.all(n.map(async r=>{let{currentVersion:i,versionMode:s}=ee(e,r),a=await fe(r),p=U(i,a)>=0;return {isLatest:p,latestVersion:Z(i,p?i:a),package:r,version:i,versionMode:s}})):[]}var ge="".padEnd(7),eo="Missing";async function to(e){let{all:t,allDependencies:n,isHeroUIAll:o,upgradeOptionList:r}=e,i=[],s=new Set,a=await pi(t,o,n,s),p=await Qn(n),l=r.map(f=>({...f,latestVersion:Z(f.version,f.latestVersion)})),m=await Promise.all(r.map(f=>Be(f.package,n,s,f.peerDependencies))),u=await li([...s]),d=[...l,...a.allOutputList],g=[...p,...m.flat(),...a.allPeerDepList,...u].filter((f,C,w)=>C===w.findIndex(h=>h.package===f.package)&&!d.some(h=>h.package===f.package));return ci(d,g),i=[...d,...g].filter((f,C,w)=>!f.isLatest&&C===w.findIndex(h=>h.package===f.package)),mi(i),i}function Zn(e,t=false){if(!e.length)return "";let n=[],o={latestVersion:0,package:0,version:0};for(let r of e)for(let i in r){if(!Object.prototype.hasOwnProperty.call(r,i)||!r[i])continue;i==="version"&&(r[i]=r[i].replace(_e,""));let s=i==="version"?r[i].replace(j,"").length:r[i].length;o[i]=Math.max(o[i],s);}for(let r of e){if(r.isLatest){if(t)continue;n.push(`  ${N.white(`${`${r.package}@${r.versionMode||""}${r.latestVersion}`.padEnd(o.package+ge.length+ge.length)}`)}${ge}${N.greenBright("latest").padStart(o.version)}${ge}`);continue}n.push(`  ${N.white(`${r.package.padEnd(o.package+ge.length)}${ge}${ie(`${r.versionMode||""}${r.version}`,o.version)}  ->  ${r.versionMode||""}${r.latestVersion}`)}${ge}`);}return n.join(`
`)}async function Be(e,t,n,o){if(o=o||JSON.parse(await le(`npm show ${e} peerDependencies --json`))||{},!o||!Object.keys(o).length)return [];let r=[];for(let[i,s]of Object.entries(o)){if(r.some(u=>u.package===i))continue;let a=t[i],p=J(s);if(!a){n.add({name:i,version:p});continue}let{versionMode:l}=ee(t,i),m=U(a,p)>=0;m?p=J(a):p=await Q(i),r.push({isLatest:m,latestVersion:m?p:Z(a,p),package:i,version:a,versionMode:l});}return r}function ci(e,t){let n=e.length===1?"Component":"Components",o={components:{color:"blue",text:"",title:N.blue(n)},peerDependencies:{color:"yellow",text:"",title:N.yellow("PeerDependencies")}},r=Zn(e),i=Zn(t,true),s=t.filter(a=>!a.isLatest);r.length&&Fe({...o.components,text:r}),c.newLine(),s.length&&c.log(N.gray(`Required min version: ${s.map(a=>`${a.package}>=${a.latestVersion.replace(j,"")}`).join(", ")}`)),i.length&&Fe({...o.peerDependencies,text:i});}async function pi(e,t,n,o){if(!e||!t)return {allOutputList:[],allPeerDepList:[]};let r=await fe(S),{currentVersion:i,versionMode:s}=ee(n,S),a=Z(i,r),p=U(i,r)>=0,l=await Be(S,n,o),m=await Be(Y,n,o),u=[{isLatest:p,latestVersion:a,package:S,version:i,versionMode:s}],d=[...l,...m];return {allOutputList:u,allPeerDepList:d}}async function li(e){let t=[];for(let n of e){let o={isLatest:false,latestVersion:n.version,package:n.name,version:N.red(eo),versionMode:""};t.push(o);}return t}function mi(e){let t={major:0,minor:0,patch:0};for(let o of e){if(o.version===eo){t.major++;continue}let r=O(o.latestVersion);it(o.version,r)?t.major++:st(o.version,r)?t.minor++:t.patch++;}let n=Object.entries(t).reduce((o,[r,i])=>i?`${o}${N.yellowBright(i)} ${r}, `:o,"").replace(/, $/,"");return n&&(c.log(n),c.newLine()),t}function no({dependencies:e,devDependencies:t,upgradePackageList:n}){for(let o of n){let r=O(o.latestVersion);if(t[o.package]){t[o.package]=r;continue}e[o.package]=r;}}function he(e,t){let{errorInfo:n,missingDependencies:o,tailwindName:r}=t;return e==="missingDependencies"?{level:"error",name:"missingDependencies",outputFn:()=>{c.log("You have not installed the required dependencies"),c.newLine(),c.log("The required dependencies are:"),o.forEach(i=>{c.log(`- ${i}`);}),c.newLine(),c.log(`See more info here: ${N.underline(vt)}`);}}:e==="incorrectTailwind"?{level:"error",name:"incorrectTailwind",outputFn:()=>{c.log(`Your ${r} is incorrect`),c.newLine(),c.log("The missing part is:"),n.forEach(i=>{c.log(`- need to add ${i}`);}),c.newLine(),c.log(`See more info here: ${N.underline(`${nt}-1`)}`);}}:{level:"error",name:"incorrectApp",outputFn:()=>{c.log("Your App.tsx is incorrect"),c.newLine(),c.log("The missing part is:"),n.forEach(i=>{c.log(`- need to add ${i}`);}),c.newLine(),c.log(`See more info here: ${N.underline(vt)}`);}}}async function ye(e,t,n){let o=[],{allDependencies:r,beta:i,packageNames:s,peerDependencies:a}=n??{},p=[],l=t.has(tt),m=t.has(be);if(a){let u=await ui({allDependencies:r,packageNames:s});p.push(...u);}if(e==="all"){let u=t.has(S);if(u&&l&&m&&!p.length)return [true];!u&&o.push(i?`${S}@${y.betaVersion}`:S),!l&&o.push(tt),!m&&o.push(`${be}@${Tt(be)}`);}else if(e==="partial"){let u=t.has(re),d=t.has(Y);if(l&&u&&d&&m&&!p.length)return [true];let g=await et(re),f=await et(Y);!l&&o.push(tt),!u&&o.push(i?`${re}@${g}`:re),!d&&o.push(i?`${Y}@${f}`:Y),!m&&o.push(`${be}@${Tt(be)}`);}return [false,...o,...a?p:[]]}async function ui(e){let{allDependencies:t,packageNames:n}=e,o=[];for(let r of n){let i=await Be(r,t,new Set);for(let s of i)if(!s.isLatest){let a=o.findIndex(m=>m.includes(s.package)),l=O(o[a]||"")?.match(/@([\d.]+)/)?.[1];l&&U(l,O(s.latestVersion))<=0&&o.splice(a,1),o.push(`${s.package}@${s.latestVersion}`);}}return o}function xe(e,t,n,o,r,i){if(e==="partial"&&!n.length)return [true];let s=[],a=readFileSync(t,"utf-8"),p=X("content",a),l=X("plugins",a);if(e==="all"){let u=X("darkMode",a).some(f=>f.includes("class"))||/darkMode:\s*["'`]class/.test(a),d=p.some(f=>f.includes(E.content.replace("{js,ts,jsx,tsx}",""))),g=l.some(f=>E.checkPluginsRegex.test(f));if(u&&d&&g)return [true];!u&&s.push(E.darkMode),!d&&s.push(E.content),!g&&s.push(E.plugins);}else if(e==="partial"){let m=wn.content(n,o),u=false,d=p.some(f=>f.includes(E.content.replace("{js,ts,jsx,tsx}",""))?(u=true,true):f.includes(m));i&&u&&c.log(`
${N.yellow("Attention")} Individual components from HeroUI do not require the "${N.bold(E.content)}" in the tailwind config
For optimized bundle sizes, consider using "${N.bold(m)}" instead`);let g=l.some(f=>E.checkPluginsRegex.test(f));if(d&&g)return [true];!d&&s.push(m),!g&&s.push(E.plugins);}return [false,...s]}function qe(e,t){let n=[];if(e==="all"||e==="partial"){let o=readFileSync(t,"utf-8"),i=ct(o).some(([s])=>s.includes(bt.import));if(i)return [true];!i&&n.push(bt.import);}return [false,...n]}function Ae(e){let t=[],n;if(e){try{n=readFileSync(e,"utf-8");let o=n.includes(_.content);if(o)return [!0];!o&&t.push(_.content);}catch(o){t.push(`Error reading .npmrc file: ${e} 
Error: ${o}`);}return [false,...t]}return [false,...t]}async function $e(e=[],t=true){let n=[];for(let o of e)if(!y.heroUIComponentsKeysSet.has(o)){let r=Ve(y.heroUIComponentsKeys,o);n.push([o,r]);}if(n.length){let[o,r]=n.reduce((i,[s,a])=>[i[0]+N.underline(s)+", ",i[1]+(a?N.underline(a)+", ":"")],["",""]);return t&&c.prefix("error",`Illegal components: ${o.replace(/, $/,"")}${r?`
${"".padEnd(12)}It may be a typo, did you mean ${r.replace(/, $/,"")}?`:""}`),false}return  true}async function mt(e){try{await e();}catch(t){t&&(await Ie({message:`${N.red("Error: ")}a unexpected error occurred, run "pnpm install" maybe can fix it or report it as a bug`,options:[{label:"Re-run pnpm install",value:"re-run-pnpm-install"},{label:"Exit",value:"exit"}]})==="exit"&&process.exit(1),await G("pnpm install --force"),await e());}}async function Mt(e,t=[]){if(H("debug"))for(let n of t)c.warn(`Debug: ${n}`);else await mt(()=>G(e));}function ro(e,t){if(!e.length||!H("debug"))return;let{dependencies:n,packageJson:o}=$(t);for(let r of e){let i=y.heroUIComponentsMap[r];i&&(n[i.package]=`${i.package}@${i.version}`);}writeFileSync(t,JSON.stringify({...o,dependencies:n},null,2),"utf-8");}function io(e,t){if(!e.length||!H("debug"))return;let{dependencies:n,packageJson:o}=$(t);for(let r of e){let i=y.heroUIComponentsMap[r];i&&delete n[i.package];}writeFileSync(t,JSON.stringify({...o,dependencies:n},null,2),"utf-8");}function so(e,t){let{format:n=false,write:o=true}=t,r=readFileSync(e,"utf-8");r=`import {HeroUIProvider} from "@heroui/react";
${r}`,r=gi(r),o&&writeFileSync(e,r,"utf-8"),n&&execSync(`npx prettier --write ${e}`,{stdio:"ignore"});}function gi(e){let t=/return\s*\(([\S\s]*?)\);/g;return e.replace(t,(o,r)=>`return (
      <HeroUIProvider>
        ${r.trim()}
      </HeroUIProvider>
    );`)}function dt(e,t){let{errorInfoList:n,format:o=false,tailwindPath:r,write:i=true}=t;if(!n.length)return;let s=readFileSync(r,"utf-8"),a=X("content",s),p=X("plugins",s);for(let l of n){let[m,u]=hi(l);if(m==="content"){if(a.includes(E.content))continue;a=a.filter(g=>!g.includes("@heroui/theme/dist/")),a.push(u),s=Pe("content",s,a,a.map((g,f,C)=>f===0?C.length===1?`
    ${JSON.stringify(g)}
`:`
    ${JSON.stringify(g)}`:C.length-1===f?`    ${JSON.stringify(g)}
  `:`    ${JSON.stringify(g)}`).join(`,
`));}else m==="plugins"&&(p.push(u),s=Pe("plugins",s,p),s=`${E.importContent(r.endsWith(".ts"))}
${s}`);if(e==="all"&&m==="darkMode"){let d=s.indexOf("plugins")-1,g=E.darkMode;s=`${s.slice(0,d)} ${g},
${s.slice(d)}`;}}if(i&&writeFileSync(r,s,"utf-8"),o)try{execSync(`npx prettier --write ${r}`,{stdio:"ignore"});}catch{c.warn(`Prettier failed to format ${r}`);}}function hi(e){return E.darkMode.includes(e)?["darkMode",e]:E.plugins.includes(e)?["plugins",e]:["content",e]}function De(e,t=true,n=true,o=void 0){if(!existsSync(e))t&&writeFileSync(e,_.content,"utf-8");else {let r=readFileSync(e,"utf-8");r=`${_.content}
${r}`,t&&writeFileSync(e,r,"utf-8");}if(!o){c.newLine(),c.log(`Added the required content in file: ${e}`),n&&!H("debug")&&(c.newLine(),c.log("Pnpm restructure will be run now"),execSync("pnpm install",{stdio:"inherit"}));return}o({message:`Added the required content in file: ${e}`,runInstall:n});}async function co(e,t){pt(e)&&(await Xn(e,t),process.exit(0));let{addApp:n=false,all:o=false,appPath:r,beta:i=false,packagePath:s=A("package.json"),tailwindPath:a=ue("**/tailwind.config.(j|t)s")[0]}=t,p=$(s),{allDependencies:l}=p,{allDependenciesKeys:m,currentComponents:u}=p,d=t.prettier??m.has("prettier"),g=!!l[S];if(!e.length&&!o){let x=y.heroUIComponents.filter(I=>!u.some(L=>L.name===I.name));x.length||(c.success("\u2705 All components have been added"),process.exit(0)),e=await we("Which components would you like to add?",x.map(I=>({description:I.description,title:I.name,value:I.name})));}else o&&(e=[S]);if(!o&&!$e(e,true))return;p=$(s),m=p.allDependenciesKeys,u=p.currentComponents;let f=u.map(x=>x.name),C=e.filter(x=>f.includes(x)||g&&x===S);if(C.length&&!H("debug")){c.prefix("error",`\u274C You have already added the following components: ${C.map(x=>N.underline(x)).join(", ")}`);return}if(n&&!r){c.prefix("error","\u274C App.(j|t)sx file not found. Please specify the appPath if the default search path does not locate your file.  'add --appPath=yourAppPath'");return}let w=await B(),h=w==="npm"?"install":"add";if(o){let[,...x]=await ye("all",m,{allDependencies:l,beta:i,packageNames:[S],peerDependencies:true});x=x.map(I=>O(I)),x.length&&(c.info(`Adding required dependencies: ${[...x].map(I=>N.underline(I)).join(", ")}`),await Mt(`${w} ${h} ${[...x].join(" ")}`,x));}else {let x=i?await hn(e):e.map(T=>y.heroUIComponentsMap[T].package),[,...I]=await ye("partial",m,{allDependencies:l,beta:i,packageNames:x,peerDependencies:true}),L=[...I,...x].map(T=>O(T));c.info(`Adding required dependencies: ${[...L].map(T=>N.underline(T)).join(", ")}`),await Mt(`${w} ${h} ${[...L].join(" ")}`,L);}H("debug")&&ro(e,s),p=$(s),m=p.allDependenciesKeys,u=p.currentComponents;let k=o?"all":"partial",b=w==="pnpm";if(a){let[,...x]=xe(k,a,u,b,void 0,true);dt(k,{errorInfoList:x,format:d,tailwindPath:a}),c.newLine(),c.log(`Tailwind CSS settings have been updated in: ${a}`);}if(n&&r&&existsSync(r)){let[x]=qe(k,r);x||(so(r,{format:d}),c.newLine(),c.info(`HeroUIProvider successfully added to the App file at: ${r}`),c.warn("Please check the placement of HeroUIProvider in the App file to ensure it's correctly integrated.'"));}if(w==="pnpm"){let x=A(".npmrc");if(!existsSync(x))writeFileSync(A(".npmrc"),_.content,"utf-8");else {let[I]=Ae(x);I||De(x);}}c.newLine(),c.success("\u2705 Components added successfully"),(m.has(S)||o)&&u.length&&(c.newLine(),c.log(`${N.yellow("Attention")} Individual components from HeroUI do not require the \`@heroui/react\` package. For optimized bundle sizes, consider using individual components.`),c.log("The redundant dependencies are:"),[...new Set(u)].forEach(x=>{c.log(`- ${x.package}`);})),c.newLine(),c.grey(`Please check the ${N.bold("HeroUIProvider")} whether in the correct place (ignore if added)
See more info here: ${ot}`),H("debug")&&io(e,s),process.exit(0);}function po(e){e.command("add").description(`1. Adds components to your project
2. Adds HeroUI Chat codebase to your project`).argument("[targets...]","Names of components, HeroUI Chat codebase url to add").option("-a, --all [boolean]","Add all components",false).option("-p, --packagePath [string]","Specify the path to the package.json file").option("--tw, --tailwindPath [string]","Specify the path to the tailwind.config.js file").option("--app, --appPath [string]","Specify the path to the App.tsx file").option("--prettier [boolean]","Apply Prettier formatting to the added content").option("--addApp [boolean]","Include App.tsx file content that requires a provider",false).option("-b, --beta [boolean]","Add beta components",false).option("-d, --directory [string]","Add HeroUI Chat codebase to a specific directory").action(co);}function fo(e){let t=P.join(e,"package.json");if(!v.existsSync(t))return {error:"No package.json found in the current directory"};try{let n=JSON.parse(v.readFileSync(t,"utf-8")),o=n.dependencies||{},r=n.devDependencies||{},i=o["@heroui/react"]||r["@heroui/react"],s=o["heroui-native"]||r["heroui-native"],a={};if(i&&(a.react=i.replace(/^[<=>^~]+/,"")),s&&(a.native=s.replace(/^[<=>^~]+/,"")),!i&&!s){let p=$i(e);if(p.isMonorepo&&p.packages.length>0){let l=Ti(e,p.packages);if(l.react&&(a.react=l.react),l.native&&(a.native=l.native),!l.react&&!l.native)return {error:`No HeroUI packages found in ${p.type} workspace packages.`}}else return {error:"HeroUI packages (@heroui/react or heroui-native) are not installed in this project."}}return a}catch(n){return {error:`Failed to parse package.json: ${n instanceof Error?n.message:String(n)}`}}}var Ci="v3";async function go(e){let{cwd:t,docsDir:n,selection:o,useSsh:r}=e,i=Ci,s=n??P.join(t,".heroui-docs");try{return v.existsSync(s)||v.mkdirSync(s,{recursive:!0}),await wi(i,s,o,r??!1),{docsPath:s,success:!0}}catch(a){return {error:a instanceof Error?a.message:String(a),success:false}}}async function wi(e,t,n,o){let r=v.mkdtempSync(P.join(xi.tmpdir(),"heroui-agents-md-")),i=o?"git@github.com:heroui-inc/heroui.git":"https://github.com/heroui-inc/heroui.git";try{try{execSync(`git clone --depth 1 --filter=blob:none --sparse --branch ${e} ${i} .`,{cwd:r,stdio:"pipe"});}catch(a){let p=a instanceof Error?a.message:String(a);throw p.includes("not found")||p.includes("did not match")?new Error(`Could not find documentation for HeroUI ${e}. This branch/tag may not exist on GitHub.`):a}let s=[];if((n==="react"||n==="both")&&(s.push("apps/docs/content/docs/react"),s.push("apps/docs/src/demos")),(n==="native"||n==="both")&&s.push("apps/docs/content/docs/native"),execSync(`git sparse-checkout set ${s.join(" ")}`,{cwd:r,stdio:"pipe"}),v.mkdirSync(t,{recursive:!0}),n==="react"||n==="both"){let a=P.join(r,"apps","docs","content","docs","react");if(v.existsSync(a)){let l=P.join(t,"react");v.existsSync(l)&&v.rmSync(l,{recursive:!0}),v.mkdirSync(l,{recursive:!0}),v.cpSync(a,l,{recursive:!0});}let p=P.join(r,"apps","docs","src","demos");if(v.existsSync(p)){let l=P.join(t,"react","demos");v.existsSync(l)&&v.rmSync(l,{recursive:!0}),v.mkdirSync(l,{recursive:!0}),v.cpSync(p,l,{recursive:!0});}}if(n==="native"||n==="both"){let a=P.join(r,"apps","docs","content","docs","native");if(v.existsSync(a)){let p=P.join(t,"native");v.existsSync(p)&&v.rmSync(p,{recursive:!0}),v.mkdirSync(p,{recursive:!0}),v.cpSync(a,p,{recursive:!0});}}}finally{v.existsSync(r)&&v.rmSync(r,{recursive:true});}}function _t(e){return v.readdirSync(e,{recursive:true}).filter(t=>(t.endsWith(".mdx")||t.endsWith(".md"))&&!t.endsWith("/index.mdx")&&!t.endsWith("/index.md")&&!t.startsWith("index.")).sort().map(t=>({relativePath:t}))}function ho(e){return v.existsSync(e)?v.readdirSync(e,{recursive:true}).filter(t=>t.endsWith(".tsx")&&!t.endsWith("/index.tsx")).sort().map(t=>({relativePath:t})):[]}function jt(e){let t=new Map;for(let o of e){let r=o.relativePath.split("/");if(r.length<2)continue;let i=r[0];if(!i)continue;t.has(i)||t.set(i,{files:[],name:i,subsections:[]});let s=t.get(i);if(s)if(r.length===2)s.files.push({relativePath:o.relativePath});else {let a=r[1];if(!a)continue;let p=s.subsections.find(l=>l.name===a);if(p||(p={files:[],name:a,subsections:[]},s.subsections.push(p)),r.length===3)p.files.push({relativePath:o.relativePath});else {let l=r[2];if(!l)continue;let m=p.subsections.find(u=>u.name===l);m||(m={files:[],name:l,subsections:[]},p.subsections.push(m)),m.files.push({relativePath:o.relativePath});}}}let n=Array.from(t.values()).sort((o,r)=>o.name.localeCompare(r.name));for(let o of n){o.files.sort((r,i)=>r.relativePath.localeCompare(i.relativePath)),o.subsections.sort((r,i)=>r.name.localeCompare(i.name));for(let r of o.subsections)r.files.sort((i,s)=>i.relativePath.localeCompare(s.relativePath)),r.subsections.sort((i,s)=>i.name.localeCompare(s.name));}return n}function Ft(e,t){let{nativeDocsPath:n,nativeSections:o,outputFile:r,reactDemoFiles:i,reactDocsPath:s,reactSections:a}=e,p=[];if(t==="react"){p.push("[HeroUI React v3 Docs Index]"),s&&p.push(`root: ${s}`),p.push("STOP. What you remember about HeroUI React v3 is WRONG for this project. Always search docs and read before any task.");let l=r||"AGENTS.md";if(p.push(`If docs missing, run this command first: heroui agents-md --react --output ${l}`),a){let m=Ht(a),u=Nt(m);for(let[d,g]of u)p.push(`${d}:{${g.join(",")}}`);}if(i&&i.length>0){let m=i.map(d=>d.relativePath),u=Nt(m,"demos");for(let[d,g]of u)p.push(`${d}:{${g.join(",")}}`);}}else {p.push("[HeroUI Native Docs Index]"),n&&p.push(`root: ${n}`),p.push("STOP. What you remember about HeroUI Native is WRONG for this project. Always search docs and read before any task.");let l=r||"AGENTS.md";if(p.push(`If docs missing, run this command first: heroui agents-md --native --output ${l}`),o){let m=Ht(o),u=Nt(m);for(let[d,g]of u)p.push(`${d}:{${g.join(",")}}`);}}return p.join("|")}function Ht(e){let t=[];for(let n of e){for(let o of n.files)t.push(o.relativePath);t.push(...Ht(n.subsections));}return t}function Nt(e,t){let n=new Map;for(let o of e){let r=o.lastIndexOf("/"),i=r===-1?".":o.slice(0,r),s=r===-1?o:o.slice(r+1),a=t?`${t}/${i}`:i,p=n.get(a);p?p.push(s):n.set(a,[s]);}return n}var ki="<!-- HEROUI-REACT-AGENTS-MD-START -->",vi="<!-- HEROUI-REACT-AGENTS-MD-END -->",bi="<!-- HEROUI-NATIVE-AGENTS-MD-START -->",Si="<!-- HEROUI-NATIVE-AGENTS-MD-END -->";function Vt(e){return e==="react"?{end:vi,start:ki}:{end:Si,start:bi}}function Ii(e,t){let{start:n}=Vt(t);return e.includes(n)}function Pi(e,t){let{end:n,start:o}=Vt(t);return `${o}
${e}
${n}`}function mo(e,t,n){let{end:o,start:r}=Vt(n),i=Pi(t,n);if(Ii(e,n)){let a=e.indexOf(r),p=e.indexOf(o)+o.length;return e.slice(0,a)+i+e.slice(p)}let s=e.endsWith(`
`)?`
`:`

`;return e+s+i+`
`}function yo(e,t,n){let o=e;return t!==void 0&&(o=mo(o,t,"react")),n!==void 0&&(o=mo(o,n,"native")),o}var Ai=".heroui-docs/";function xo(e){let t=P.join(e,".gitignore"),n=/^\s*\.heroui-docs(?:\/.*)?$/,o="";if(v.existsSync(t)&&(o=v.readFileSync(t,"utf-8")),o.split(/\r?\n/).some(p=>n.test(p)))return {alreadyPresent:true,path:t,updated:false};let i=o.length>0&&!o.endsWith(`
`),s=o.includes("# heroui-agents-md")?"":`# heroui-agents-md
`,a=o+(i?`
`:"")+s+`${Ai}
`;return v.writeFileSync(t,a,"utf-8"),{alreadyPresent:false,path:t,updated:true}}function $i(e){let t=P.join(e,"package.json"),n=P.join(e,"pnpm-workspace.yaml");if(v.existsSync(n)){let i=Di(n);if(i.length>0)return {isMonorepo:true,packages:i,type:"pnpm"}}if(v.existsSync(t)){let i=Co(t);if(i.length>0)return {isMonorepo:true,packages:i,type:"npm"}}let o=P.join(e,"lerna.json");if(v.existsSync(o)){let i=Ui(o);if(i.length>0)return {isMonorepo:true,packages:i,type:"lerna"}}let r=P.join(e,"nx.json");if(v.existsSync(r)){let i=Ei(e,t);if(i.length>0)return {isMonorepo:true,packages:i,type:"nx"}}return {isMonorepo:false,packages:[],type:null}}function Di(e){try{let n=v.readFileSync(e,"utf-8").split(`
`),o=[],r=!1;for(let i of n){let s=i.trim();if(s==="packages:"){r=!0;continue}if(r){if(s&&!s.startsWith("-")&&!s.startsWith("#"))break;let a=s.match(/^-\s*["']?([^"']+)["']?$/);a&&a[1]&&o.push(a[1]);}}return o}catch{return []}}function Co(e){try{let t=v.readFileSync(e,"utf-8"),n=JSON.parse(t);return Array.isArray(n.workspaces)?n.workspaces:n.workspaces?.packages&&Array.isArray(n.workspaces.packages)?n.workspaces.packages:[]}catch{return []}}function Ui(e){try{let t=v.readFileSync(e,"utf-8"),n=JSON.parse(t);return Array.isArray(n.packages)?n.packages:["packages/*"]}catch{return []}}function Ei(e,t){if(v.existsSync(t)){let r=Co(t);if(r.length>0)return r}let n=["apps/*","libs/*","packages/*"],o=[];for(let r of n){let i=P.join(e,r.replace("/*",""));v.existsSync(i)&&o.push(r);}return o}function Ti(e,t){let n=Ri(e,t),o=[],r=[];for(let a of n){let p=P.join(a,"package.json");if(v.existsSync(p))try{let l=v.readFileSync(p,"utf-8"),m=JSON.parse(l),u=m.dependencies?.["@heroui/react"]||m.devDependencies?.["@heroui/react"],d=m.dependencies?.["heroui-native"]||m.devDependencies?.["heroui-native"];u&&o.push(u.replace(/^[<=>^~]+/,"")),d&&r.push(d.replace(/^[<=>^~]+/,""));}catch{}}let i=uo(r),s=uo(o);return {...i?{native:i}:{},...s?{react:s}:{}}}function Ri(e,t){let n=[];for(let o of t)if(!o.startsWith("!"))if(o.includes("*"))n.push(...Mi(e,o));else {let r=P.join(e,o);v.existsSync(r)&&n.push(r);}return [...new Set(n)]}function Mi(e,t){let n=t.split("/"),o=[];function r(i,s){if(s>=n.length){v.existsSync(P.join(i,"package.json"))&&o.push(i);return}let a=n[s];if(a)if(a==="*"){if(!v.existsSync(i))return;try{for(let p of v.readdirSync(i)){let l=P.join(i,p);ko(l)&&(s===n.length-1?v.existsSync(P.join(l,"package.json"))&&o.push(l):r(l,s+1));}}catch{}}else a==="**"?wo(i,o):r(P.join(i,a),s+1);}return r(e,0),o}function wo(e,t){if(v.existsSync(e)){v.existsSync(P.join(e,"package.json"))&&t.push(e);try{for(let n of v.readdirSync(e)){if(n==="node_modules"||n.startsWith("."))continue;let o=P.join(e,n);ko(o)&&wo(o,t);}}catch{}}}function ko(e){try{return v.statSync(e).isDirectory()}catch{return  false}}function uo(e){return e.length===0?null:e.length===1?e[0]??null:e.reduce((t,n)=>t?n&&Li(n,t)>0?n:t:n??null)}function Li(e,t){let n=l=>{let m=l.match(/^(\d+)\.(\d+)\.(\d+)/);return m?[parseInt(m[1]??"0",10),parseInt(m[2]??"0",10),parseInt(m[3]??"0",10)]:[0,0,0]},[o,r,i]=n(e),[s,a,p]=n(t);return o!==s?o-s:r!==a?r-a:i-p}var Bt=class extends Error{constructor(n,o=1){super(n);this.exitCode=o;this.name="CLIError",Error.captureStackTrace(this,this.constructor);}},ft=class extends Bt{constructor(t){super(t,1),this.name="ValidationError";}};var Ue=".heroui-docs";function qt(e){if(e<1024)return `${e} B`;let t=e/1024;return t<1024?`${t.toFixed(1)} KB`:`${(t/1024).toFixed(1)} MB`}function Oi(e){let t=fo(e);return {hasNative:!!t.native,hasReact:!!t.react}}function Ni(e,t){let n=P.join(e,"package.json");if(!v.existsSync(n))return {isValid:true,warnings:[]};try{let o=JSON.parse(v.readFileSync(n,"utf-8")),r=o.dependencies||{},i=o.devDependencies||{},s={...r,...i},a=[],p=s.tailwindcss||s["@tailwindcss/vite"];if(p){let l=p.replace(/^[<=>^~]+/,"");parseInt(l.split(".")[0]||"0",10)<4&&a.push(`Tailwind CSS version ${p} is installed, but HeroUI v3 requires Tailwind CSS v4+.`);}if(t==="react"||t==="both"){let l=s.react;if(l){let u=l.replace(/^[<=>^~]+/,"");U(u,"19.0.0")<0&&a.push(`React version ${l} is installed, but HeroUI v3 requires React 19+.`);}else a.push("React is not installed. HeroUI v3 requires React 19+.");let m=s["@heroui/react"];if(m&&!(m.includes("@beta")||m==="beta"||m.includes("@latest")||m==="latest")){let u=m.replace(/^[<=>^~]+/,"");U(u,"2.8.0")<0&&a.push(`@heroui/react version ${m} is installed, but these docs are recommended for version >= 2.8.0, @beta, or @latest (which supports Tailwind CSS v4).`);}}return {isValid:a.length===0,warnings:a}}catch{return {isValid:true,warnings:[]}}}async function Hi(e,t){let n=Ni(e,t);if(n.isValid)return  true;c.warn(`
\u26A0\uFE0F  HeroUI v3 requirements not met:`);for(let r of n.warnings)c.warn(`  \u2022 ${r}`);return c.newLine(),c.log("The downloaded documentation is for HeroUI v3 and may not be compatible with your current setup."),c.newLine(),await en("Do you want to continue anyway?")}async function bo(e){let t=process.cwd(),n,o;if(e.react&&e.native)n="both";else if(e.react)n="react";else if(e.native)n="native";else {let{hasNative:h,hasReact:k}=Oi(t);if(k&&h)if(e.output)n=await Kt(false);else {let b=await vo();n=b.selection,o=b.targetFiles;}else if(k)n="react",c.log(N.dim("Detected @heroui/react, using HeroUI React v3 docs"));else if(h)n="native",c.log(N.dim("Detected heroui-native, using HeroUI Native docs"));else if(e.output)n=await Kt(true);else {let b=await vo(true);n=b.selection,o=b.targetFiles;}}if(!o)if(e.output)o=Array.isArray(e.output)?e.output:[e.output];else {let h=await So();h?o=Array.isArray(h)?h:[h]:o=["AGENTS.md"];}await Hi(t,n)||(c.warn(`
Cancelled.`),process.exit(0));let i=P.join(t,Ue),s=n==="both"?"HeroUI React v3 and HeroUI Native":n==="react"?"HeroUI React v3":"HeroUI Native";c.log(`
Downloading ${s} documentation to ${N.cyan(Ue)}...`);let a=await go({cwd:t,docsDir:i,selection:n,useSsh:e.ssh??false});if(!a.success)throw new ft(`Failed to pull docs: ${a.error}`);let p,l,m;if(n==="react"||n==="both"){let h=P.join(i,"react");if(v.existsSync(h)){let b=_t(h);p=jt(b);}let k=P.join(i,"react","demos");v.existsSync(k)&&(m=ho(k));}if(n==="native"||n==="both"){let h=P.join(i,"native");if(v.existsSync(h)){let k=_t(h);l=jt(k);}}let u=n==="react"||n==="both"?`./${Ue}/react`:void 0,d=n==="native"||n==="both"?`./${Ue}/native`:void 0,g={outputFile:o[0]};d&&(g.nativeDocsPath=d),l&&(g.nativeSections=l),u&&(g.reactDocsPath=u),p&&(g.reactSections=p),m&&(g.reactDemoFiles=m);let f=n==="react"||n==="both"?Ft(g,"react"):void 0,C=n==="native"||n==="both"?Ft(g,"native"):void 0,w=xo(t);for(let h of o){let k=P.join(t,h),b=0,x=true,I="";v.existsSync(k)&&(I=v.readFileSync(k,"utf-8"),b=Buffer.byteLength(I,"utf-8"),x=false);let L=yo(I,f,C);v.writeFileSync(k,L,"utf-8");let T=Buffer.byteLength(L,"utf-8"),D=x?"Created":"Updated",M=x?qt(T):`${qt(b)} \u2192 ${qt(T)}`;c.success(`\u2713 ${D} ${N.bold(h)} (${M})`);}w.updated&&c.success(`\u2713 Added ${N.bold(Ue)} to .gitignore`),c.newLine(),c.log(N.cyan("\u{1F4DA} What was installed:")),c.log(`  \u2022 Documentation files downloaded to ${N.bold(`.${Ue}/`)}`),c.log(`  \u2022 Index generated in ${N.bold(o.join(", "))}`),(n==="react"||n==="both")&&c.log("  \u2022 Demo files included for React code examples"),c.newLine(),c.log(N.cyan("\u{1F4A1} How it works:")),c.log(`  \u2022 AI assistants (like Claude, Cursor) can now reference ${s} docs directly`),c.log(`  \u2022 The index in ${N.bold(o[0])} helps assistants find relevant documentation`),c.log(`  \u2022 Run ${N.bold("heroui agents-md")} again to update docs`),c.newLine(),process.exit(0);}async function Kt(e=false){e&&(c.warn("Neither @heroui/react nor heroui-native is installed in this project."),c.newLine());let t=await W("Select docs to include",[{title:"HeroUI React v3",value:"react"},{title:"HeroUI Native",value:"native"},{title:"Both",value:"both"}]);return t===void 0&&(c.warn(`
Cancelled.`),process.exit(0)),t}async function vo(e=false){c.log(N.cyan("HeroUI Documentation for AI Agents")),c.info(`Download the latest HeroUI documentation for AI agents to the current project
`);let t=await Kt(e),n=await So(),o=Array.isArray(n)?n:[n];return {selection:t,targetFiles:o}}async function So(){let e=await W("Target markdown file",[{title:"AGENTS.md",value:"AGENTS.md"},{title:"CLAUDE.md",value:"CLAUDE.md"},{title:"Both",value:"__both__"},{title:"Custom...",value:"__custom__"}]);if(e===void 0&&(c.warn(`
Cancelled.`),process.exit(0)),e==="__both__")return ["AGENTS.md","CLAUDE.md"];let t=e;if(t==="__custom__"){let n=await Qt("Enter custom file path","AGENTS.md");(n===void 0||!n.trim())&&(c.warn(`
Cancelled.`),process.exit(0)),t=n.trim();}return t}function Io(e){e.command("agents-md").description("Download HeroUI documentation for AI coding agents (Claude, Cursor, etc.) to the current project").option("--react","Include only React docs").option("--native","Include only Native docs").option("--output <files...>","Target file path(s) (e.g., AGENTS.md, or AGENTS.md CLAUDE.md for multiple)").option("--ssh","Use SSH instead of HTTPS for git clone").action(bo);}async function Ao(e){let{tailwindPath:t=ue("**/tailwind.config.(j|t)s"),appPath:n=ue("**/App.(j|t)sx")[0],checkApp:o=false,checkPnpm:r=true,checkTailwind:i=!!t[0],packagePath:s=A("package.json")}=e,a=at(o),p=at(r),l=at(i),m=[t].flat(),{allDependencies:u,allDependenciesKeys:d,currentComponents:g,isAllComponents:f}=$(s);if(!g.length&&!f){c.prefix("error",`\u274C No ${N.underline("HeroUI components")} found in your project. Please consult the installation guide at: https://heroui.com/docs/guide/installation#global-installation`);return}let C=[];if(f&&g.length&&C.push({level:"warn",name:"redundantDependencies",outputFn:()=>{c.log("You have installed some unnecessary dependencies. Consider removing them for optimal performance."),c.newLine(),c.log("The following dependencies are redundant:"),g.forEach(w=>{c.log(`- ${w.package}`);});}}),l&&!m.length&&C.push({level:"error",name:"missingTailwind",outputFn:()=>{c.log("Missing tailwind.config.(j|t)s file. To set up, visit: "+N.underline(nt));}}),a&&!n&&C.push({level:"error",name:"missingApp",outputFn:()=>{c.log("App.(j|t)sx file not found. Please specify the path using: doctor --appPath=[yourAppPath]");}}),f){let[w,...h]=await ye("all",d,{allDependencies:u,packageNames:[S],peerDependencies:true});if(g.length){let[k,...b]=await ye("partial",d,{allDependencies:u,packageNames:g.map(x=>x.package),peerDependencies:true});w=k||w,h=[...b,...h].filter((x,I,L)=>(x=O(x).replace(/@[\d.]+/g,""),L.findIndex(T=>O(T).replace(/@[\d.]+/g,"")===x)===I));}if(w||C.push(he("missingDependencies",{missingDependencies:h})),l)for(let k of m){let[b,...x]=xe("all",k);if(!b){let I=basename(k);C.push(he("incorrectTailwind",{errorInfo:x,tailwindName:I}));}}if(a&&n){let[k,...b]=qe("all",n);k||C.push(he("incorrectApp",{errorInfo:b}));}}else if(g.length){let[w,...h]=await ye("partial",d,{allDependencies:u,packageNames:g.map(k=>k.package),peerDependencies:true});if(w||C.push(he("missingDependencies",{missingDependencies:h})),l){let k=await B()==="pnpm";for(let b of m){let[x,...I]=xe("partial",b,g,k,void 0,true);if(!x){let L=basename(b);C.push(he("incorrectTailwind",{errorInfo:I,tailwindName:L}));}}}if(a&&n){let[k,...b]=qe("partial",n);k||C.push(he("incorrectApp",{errorInfo:b}));}}if(p&&await B()==="pnpm"){let h=A(".npmrc"),[k,...b]=Ae(h);k||C.push({level:"error",name:"incorrectPnpm",outputFn:()=>{c.log(`The pnpm setup is incorrect 
Please update your configuration according to the guidelines provided at: `+N.underline(Cn)),c.newLine(),c.log("Required changes:"),b.forEach(x=>{c.log(`- Add ${x}`);});}});}if(!C.length){c.newLine(),c.success("\u2705 Your project has no detected issues.");return}c.prefix("error",`\u274C Your project has ${N.underline(C.length)} issue${C.length===1?"":"s"} that require attention`),c.newLine();for(let w=0;w<C.length;w++){let h=C[w];c[h.level](`\u2757\uFE0FIssue ${w+1}: ${N.bold(h.name)}`),c.newLine(),h.outputFn(),c.newLine();}process.exit(0);}function $o(e){e.command("doctor").description("Checks for issues in the project").option("-p, --packagePath [string]","Specify the path to the package.json file").option("--tw, --tailwindPath [string]","Specify the path to the tailwind.config.js file").option("--app, --appPath [string]","Specify the path to the App.tsx file").option("--ca, --checkApp [boolean]","Check the App.tsx file",false).option("--ct, --checkTailwind [boolean]","Check the tailwind.config.js file").option("--cp, --checkPnpm [boolean]","Check for Pnpm",true).action(Ao);}async function Do(e){let{packagePath:t=A("package.json")}=e,{currentComponents:n}=$(t);de({components:n}),Rn(),process.exit(0);}function Uo(e){e.command("env").description("Displays debugging information for the local environment").option("-p --packagePath [string]","Specify the path to the package.json file").action(Do);}var ji="package-lock=true";function Eo(e){writeFileSync(e,ji,"utf-8");}function To(e,t){e&&(Object.keys(Ce).includes(e)||Et(Object.keys(Ce),e)),t&&(ze.includes(t)||Et(ze,t));}var Ro="https://codeload.github.com/heroui-inc/next-app-template/tar.gz/main",Mo="https://codeload.github.com/heroui-inc/next-pages-template/tar.gz/main",Lo="https://codeload.github.com/heroui-inc/vite-template/tar.gz/main",Oo="https://codeload.github.com/heroui-inc/remix-template/tar.gz/main",No="https://github.com/heroui-inc/laravel-template/archive/refs/heads/master.zip",Ho="next-app-template-main",_o="next-pages-template-main",jo="vite-template-main",Fo="remix-template-main",Vo="laravel-template-main",Bo="next-app-template",qo="next-pages-template",Ko="vite-template",Wo="remix-template",Go="laravel-template";var Ce={app:Bo,laravel:Go,pages:qo,remix:Wo,vite:Ko};async function Jo(e,t){let{package:n="npm",template:o}=t;To(o,n),K.intro(N.cyanBright("Create a new project"));let{packageName:r,projectName:i,template:s}=await Bi(n,e,o),{run:a}=Se(r);existsSync(wt(`${V}/${i}`))&&(K.cancel(`The project name ${N.redBright(i)} already exists`),process.exit(1)),s==="app"?(await Ge(Ro),Ye(Ho,i)):s==="pages"?(await Ge(Mo),Ye(_o,i)):s==="vite"?(await Ge(Lo),Ye(jo,i)):s==="remix"?(await Ge(Oo),Ye(Fo,i)):s==="laravel"?(await Ge(No),Ye(Vo,i)):_exhaustiveCheck=s;let p=wt(`${V}/${i}/.npmrc`);Eo(p),r==="pnpm"&&De(p,true,false,({message:l})=>{K.log.message(l);}),K.note(`cd ${N.cyanBright(i)}
${N.cyanBright(r)} install`,"Next steps"),K.outro(`\u{1F680} Get started with ${N.cyanBright(`${r} ${a} dev`)}`),process.exit(0);}async function Ge(e){await _n({failText:"Template creation failed",successText:"Template created successfully!",task:qn(V,e),text:"Creating template..."});}function Ye(e,t){try{renameSync(join(V,e),join(V,t));}catch(n){n&&(K.cancel(`rename Error: ${n}`),process.exit(0));}}async function Bi(e,t,n){return n=await Ie({initialValue:n,message:"Select a template (Enter to select)",options:[{hint:"A Next.js 15 with app directory template pre-configured with HeroUI (v2) and Tailwind CSS.",label:"App",value:"app"},{hint:"A Next.js 15 with pages directory template pre-configured with HeroUI (v2) and Tailwind CSS.",label:"Pages",value:"pages"},{hint:"A Vite template pre-configured with HeroUI (v2) and Tailwind CSS.",label:"Vite",value:"vite"},{hint:"A Remix template pre-configured with HeroUI (v2) and Tailwind CSS.",label:"Remix",value:"remix"},{hint:"A Laravel template pre-configured with HeroUI (v2) and Tailwind CSS.",label:"Laravel",value:"laravel"}]}),t=await Hn({initialValue:t??Ce[n],message:"New project name (Enter to skip with default name)",placeholder:Ce[n]}),e=await Ie({initialValue:e,message:"Select a package manager (Enter to select)",options:[{label:N.gray("npm"),value:"npm"},{label:N.gray("yarn"),value:"yarn"},{label:N.gray("pnpm"),value:"pnpm"},{label:N.gray("bun"),value:"bun"}]}),{packageName:e,projectName:t,template:n}}function zo(e){e.command("init").description("Initializes a new project").argument("[projectName]","Name of the project to initialize").option("-t --template [string]",`Specify a template for the new project, e.g. ${Object.keys(Ce).join(", ")}`).option("-p --package [string]","The package manager to use for the new project","npm").action(Jo);}async function Xo(e){let{packagePath:t=A("package.json"),remote:n=false}=e,o=y.heroUIComponents;try{if(!n){let{currentComponents:r}=await $(t);o=r;}if(!o.length){c.warn(`No HeroUI components detected in the specified package.json at: ${t}`);return}n?de({commandName:"list",components:o}):de({components:o});}catch(r){c.prefix("error",`An error occurred while attempting to list the components: ${r}`);}process.exit(0);}function Qo(e){e.command("list").description("Lists all components, showing status, descriptions, and versions").option("-p --packagePath [string]","Specify the path to the package.json file").option("-r --remote","List all components available remotely").action(Xo);}async function Zo(e,t){let{remove:n}=Se(t);await G(`${t} ${n} ${e.join(" ")}`);}async function er(e,t){let{currentComponents:n,isHeroUIAll:o,isPnpm:r,prettier:i,tailwindPath:s}=t;if(s&&!existsSync(s)){c.prefix("warn","No tailwind.config.(j|t)s found remove action skipped");return}let a=readFileSync(s,"utf-8"),p=X("content",a),l=X("plugins",a),m=p.some(d=>d.includes(E.content));if(!n.length&&!o){let d=l.findIndex(g=>g.includes("heroui"));d!==-1&&l.splice(d,1),a=Pe("plugins",a,l),a=a.replace(/(const|var|let|import)[\W\w]+?heroui.*?;\n/,"");}if(!m){for(;p.some(d=>d.includes("heroui"));)p.splice(p.findIndex(d=>d.includes("heroui")),1);a=Pe("content",a,p);}writeFileSync(s,a,"utf-8");let[,...u]=xe(e,s,n,r,void 0,true);dt(e,{errorInfoList:u,format:i,tailwindPath:s}),c.newLine(),c.info(`Remove the removed components tailwind content in file: ${s}`);}async function nr(e,t){let{all:n=false,packagePath:o=A("package.json"),tailwindPath:r=ue("**/tailwind.config.(j|t)s")[0]}=t;var{allDependencies:g,allDependenciesKeys:i,currentComponents:f}=$(o);let s=await B(),a=t.prettier??i.has("prettier"),p=!!g[S];if(!f.length&&!p){c.prefix("error",`No HeroUI components detected in your package.json at: ${o}`);return}if(n||p)e=p?[S]:f.map(w=>w.package);else if(!e.length)e=await we("Select the components to remove",f.map(w=>({title:w.package,value:w.package})));else {if(!$e(e))return;e=Mn(e);}let l=e.includes(S)?await Ln(e,g):f.filter(w=>e.some(h=>h.includes(w.package)||h.includes(w.name)));de({components:l,message:N.yellowBright("\u2757\uFE0F Components slated for removal:")}),await W("Confirm removal of these components:",[{title:"Yes",value:true},{title:"No",value:false}])||process.exit(0);let u=[...e];f.filter(w=>!e.includes(w.package)).length||(g[Y]&&u.push(Y),g[re]&&u.push(re)),await Zo(u,s);var{allDependencies:g,currentComponents:f}=$(o,false);if(p=!!g[S],r&&er(p?"all":"partial",{currentComponents:f,isHeroUIAll:p,isPnpm:s==="pnpm",prettier:a,tailwindPath:r}),!f.length&&!p){if(s==="pnpm"){let w=A(".npmrc");if(existsSync(w)){let h=readFileSync(w,"utf-8");h=h.replace(_.content,""),c.newLine(),c.info("Removing specified .npmrc file content"),writeFileSync(w,h,"utf-8");}}c.newLine(),c.warn(`No HeroUI components remain installed. Ensure the HeroUIProvider is also removed if necessary.
For more information, visit: ${ot}`);}c.newLine(),c.success(`\u2705 Successfully removed the specified HeroUI components: ${e.map(w=>N.underline(w)).join(", ")}`),process.exit(0);}function or(e){e.command("remove").description("Removes components from the project").argument("[components...]","Names of components to remove").option("-p, --packagePath [string]","Specify the path to the package.json file").option("-a, --all [boolean]","Remove all components",false).option("--tw, --tailwindPath [string]","Specify the path to the tailwind.config.js file").option("--prettier [boolean]","Apply Prettier formatting to the added content").action(nr);}async function rr(e){if(e==="pnpm"){let t=A(".npmrc");if(!existsSync(t))writeFileSync(A(".npmrc"),_.content,"utf-8");else {let[n]=Ae(t);n||De(t);}}}function ir(e,t,n){let o=e.match(/(^\w+$)/)?.[1];if(o)return t.includes(o);let r=U(e,t);return n&&r===1&&!e.includes("beta")?false:r>=0}async function sr(e,t){let{all:n=false,beta:o=false,packagePath:r=A("package.json"),write:i=false}=t,{allDependencies:s,currentComponents:a,dependencies:p,devDependencies:l,packageJson:m}=$(r,false),u=!!s[S],d=[];if(await Promise.all(a.map(async h=>{let k=await fe(h.package),b=ir(h.version,k,o);d.push({...h,isLatest:b,latestVersion:k});})),!d.length&&!u){c.prefix("error",`No HeroUI components detected in your package.json at: ${r}`);return}if(n)e=a.map(h=>h.package);else if(e.length){if(!$e(e))return}else {if(u){let h=await fe(S),k={isLatest:U(h,J(s[S]))<=0,latestVersion:h,package:S,version:J(s[S])};d.push(k);}d.every(h=>h.isLatest)&&(c.success("\u2705 All HeroUI packages are up to date"),process.exit(0)),e=await we("Select the components to upgrade",d.map(h=>{let k=ir(h.version,h.latestVersion,o);return {disabled:k,disabledMessage:"Already up to date",title:`${h.package}${k?"":`@${h.version} -> ${Z(h.version,h.latestVersion)}`}`,value:h.package}}));}e=e.map(h=>y.heroUIComponentsMap[h]?.package?y.heroUIComponentsMap[h].package:h);let g=d.filter(h=>e.includes(h.package)),f=await to({all:n,allDependencies:s,isHeroUIAll:u,upgradeOptionList:g}),C=[],w=await B();if(f.length){let h=await W("Would you like to proceed with the upgrade?",[{title:"Yes",value:true},{description:"Select this if you wish to exclude certain packages from the upgrade",title:"No",value:false}]),{install:k}=Se(w);h||await W("Would you like to exclude any packages from the upgrade?",[{description:"Select this to choose packages to exclude",title:"Yes",value:true},{description:"Select this to proceed without excluding any packages",title:"No",value:false}])&&(C=await Zt("Select the packages you want to exclude from the upgrade:",f.map(x=>({description:`${x.version} -> ${Z(x.version,x.latestVersion)}`,title:x.package,value:x.package})))),f=f.filter(b=>!C.some(x=>b.package===x)),i?(no({dependencies:p,devDependencies:l,upgradePackageList:f}),v.writeFileSync(r,JSON.stringify(m,null,2),"utf-8"),c.newLine(),c.success("\u2705 Upgrade version written to package.json"),process.exit(0)):await mt(()=>G(`${w} ${k} ${f.reduce((b,x,I)=>`${b}${I===0?"":" "}${x.package}@${x.latestVersion.replace(j,"")}`,"")}`));}rr(w),c.newLine(),c.success("\u2705 Upgrade complete. All components are up to date."),process.exit(0);}function ar(e){e.command("upgrade").description("Upgrades project components to the latest versions").argument("[components...]","Names of components to upgrade").option("-p --packagePath [string]","Specify the path to the package.json file").option("-a --all [boolean]","Upgrade all components",false).option("-w --write [boolean]","Write the upgrade version to package.json file",false).option("-b --beta [boolean]","Upgrade beta components",false).action(sr);}function cr(e){zo(e),po(e),ar(e),or(e),Qo(e),Uo(e),$o(e),Io(e);}var Wt=["add","agents-md","env","init","list","upgrade","doctor","remove"],Je=new Command;Je.name("heroui").usage("[command]").description(An(`
HeroUI CLI v${lt.version}
`,"")).version(lt.version,"-v, --version","Output the current version").helpOption("-h, --help","Display help for command").allowUnknownOption().option("--no-cache","Disable cache, by default data will be cached for 30m after the first request").option("-d, --debug","Debug mode will not install dependencies").action(async(e,t)=>{let n=false;if(t){let o=t.args?.[0];if(o&&!Wt.includes(o)){n=true;let r=Ve(Wt,o);r?c.error(`Unknown command '${o}', Did you mean '${N.underline(r)}'?`):c.error(`Unknown command '${o}'`);}}if(!n){let r=Je.helpInformation().split(`
`);r=r.filter(i=>i&&!i.includes("HeroUI CLI v")),r=r.map(i=>{let s=i.match(/(\w+)\s\[/)?.[1];return s?i.replace(s,N.cyan(s)):i}),c.log(r.join(`
`));}process.exit(0);});cr(Je);Je.hook("preAction",async e=>{let t=e.args?.[0],n=e.rawArgs.slice(2),o=n.includes("--no-cache"),r=n.includes("--debug")||n.includes("-d"),i=e.args?.slice(1);if(pt(i)||!t)return;if(Qe(o),y.debug=r,y.beta=n.includes("-b")||n.includes("--beta"),t&&Wt.includes(t)){let p=(await xt()).components,l=(await xt()).betaComponents;St({beta:false,heroUIComponents:p}),y.beta&&St({beta:true,heroUIComponents:l});}let[s]=await Promise.all([pe("cliLatestVersion")]);y.cliLatestVersion=s;let a=lt.version;U(a,s)===-1&&(Fe({center:true,color:"yellow",padding:1,text:`${N.gray(`Available upgrade: v${a} -> ${N.greenBright(`v${s}`)}
Run \`${N.cyan("npm install -g heroui-cli@latest")}\` to upgrade
Changelog: ${N.underline("https://github.com/heroui-inc/heroui-cli/releases")}`)}`,title:ht("HeroUI CLI")}),c.newLine());});Je.parseAsync(process.argv).catch(async e=>{c.newLine(),c.error("Unexpected error. Please report it as a bug:"),c.log(e.message),e.stack&&c.grey(e.stack),c.newLine(),process.exit(1);});//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map